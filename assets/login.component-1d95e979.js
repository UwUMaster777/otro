import{_ as y,l as M,r as a,o as p,c as m,f as i,n as _,w as u,m as b,a as n,t as k,p as F}from"./index-23a2f24f.js";const t={no_mail:"Ingrese el correo electronico",no_password:"Ingrese la contraseña",no_mail_at:"El correo electrónico no es valido",no_mail_valid_url:"La direccion web del correo es invalida"};function g(e,r){if(!r)return t.no_password;if(!e)return t.no_mail;const o=e.split("@");if(o.length!==2||!o[0]||!o[1])return t.no_mail_at;const l=o[1].split(".");if(l.length<2)return t.no_mail_valid_url;for(let s in l)if(l[s].length===0)return t.no_mail_valid_url;return!1}const V={data(){return{email:"",password:"",emailFailed:!1,passwordFailed:!1,errorMessage:""}},methods:{tryLogin(){this.errorMessage=!0,M.methods.logIn(this.email,this.password).then(e=>{e===!1?(this.passwordFailed=!0,this.emailFailed=!0,this.errorMessage="El usuario o la contraseña son incorrectos"):this.$emit("logged")}).catch(e=>{this.passwordFailed=!0,this.emailFailed=!0,this.errorMessage="El usuario o la contraseña son incorrectos"})}},watch:{email:{handler(e,r){this.passwordFailed=!1,this.errorMessage=g(e,this.password),e&&this.password&&this.errorMessage?this.emailFailed=!0:(this.emailFailed=!1,!e&&!this.password&&(this.errorMessage=""))},immediate:!0},password:{handler(e,r){this.errorMessage=g(this.email,e),!this.email&&!e&&(this.errorMessage="")},immediate:!0}}},I={key:0,div:"",class:"flex flex-col login gap-1"},L=n("div",{class:"text-10 margin-2"},"Iniciar Sesión",-1),C={class:"p-error text",id:"text-error"},K={key:1,class:"flex flex-col login gap-1text-10 margin-2"},S=n("div",{class:"text-10 margin-1"},"Iniciando Sesión",-1),E={class:"margin-1"};function N(e,r,o,l,s,d){const h=a("pv-input-text"),f=a("pv-password"),v=a("router-link"),w=a("pv-button"),x=a("pv-progress-bar");return s.errorMessage!==!0?(p(),m("div",I,[L,i(h,{ref:"emailInput",modelValue:s.email,"onUpdate:modelValue":r[0]||(r[0]=c=>s.email=c),class:_({"p-invalid":s.emailFailed}),placeholder:"correo",onKeydown:u(d.tryLogin,["enter"])},null,8,["modelValue","class","onKeydown"]),i(f,{ref:"passwordInput",modelValue:s.password,"onUpdate:modelValue":r[1]||(r[1]=c=>s.password=c),class:_({"p-invalid":s.passwordFailed}),placeholder:"contraseña",toggleMask:"",feedback:!1,onKeydown:u(d.tryLogin,["enter"])},null,8,["modelValue","class","onKeydown"]),i(v,{to:"/register",id:"link"},{default:b(()=>[F("¿No tienes una cuenta?")]),_:1}),n("small",C,k(s.errorMessage||" "),1),i(w,{label:"Iniciar Sesión",severity:"secondary",size:"large",rounded:"",onClick:d.tryLogin,disabled:s.errorMessage},null,8,["onClick","disabled"])])):(p(),m("div",K,[S,n("div",E,[i(x,{style:{width:"24rem"},mode:"indeterminate"})])]))}const W=y(V,[["render",N]]);export{W as default};
